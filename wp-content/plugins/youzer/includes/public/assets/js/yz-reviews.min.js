!function(s){"use strict";s(document).ready(function(){var i;s(document).on("click","#yz-add-review",function(e){e.preventDefault();var t=s("#yz-review-form").serialize()+"&action=yz_handle_user_reviews&operation="+s(this).attr("data-action")+"&security="+Youzer.security_nonce,r=s(this);r.text();r.attr("disabled","disabled"),r.addClass("loading"),s.post(ajaxurl,t,function(e){r.removeClass("loading");var t=s.parseJSON(e);return t.error?(s.yz_DialogMsg("error",t.error),r.attr("disabled",!1)):(r.closest("#yz-modal").find(".yz-modal-close-icon").trigger("click"),"yz-item-tools"!=i.parent().attr("class")&&i.find(".yz-tool-name").text(t.edit_review),"edit"==t.action?(yyz,modalz_review_button.attr("data-review-id",t.review_id),i.attr("data-action","edit"),i.find(".yz-tool-name").text(t.button_title),i.find(".yz-tool-icon i").removeClass().addClass("fas fa-edit"),void 0!==i.attr("data-yztooltip")&&i.attr("data-yztooltip",t.button_title)):"delete_button"==t.action&&i.remove(),s.yz_DialogMsg("success",t.msg)),!1}).fail(function(e,t,a){return r.attr("disabled","disabled"),s.yz_DialogMsg("error",Youzer.unknown_error),!1})}),s(document).on("click",".yz-review-btn, .yz-review-tool.yz-edit-tool",function(e){e.preventDefault(),i=s(this);var t,r=s(this),a=null;if(i.hasClass("yz-review-btn")?(a=s(this).attr("data-review-id"),t=s(this).parent(".yz-tools").data("user-id")):(a=s(this).parent(".yz-item-tools").data("review-id"),t=s(this).parent(".yz-item-tools").data("user-id")),s(this).hasClass("loading"))return!1;r.addClass("loading");var o={user_id:t,review_id:a,security:Youzer.security_nonce,action:"yz_get_user_review_form",operation:s(this).attr("data-action")};s.post(Youzer.ajax_url,o,function(e){if(s.yz_isJSON(e)){var t=s.parseJSON(e);return r.removeClass("loading"),s.yz_DialogMsg("error",t.error),!1}r.attr("data-loaded","true"),r.removeClass("loading");var a=s(e);s.yz_show_modal(a)}).fail(function(e,t,a){return r.removeClass("loading"),s.yz_DialogMsg("error",Youzer.unknown_error),!1})}),s(document).on("click","#yz-delete-review, .yz-review-tool.yz-delete-tool",function(e){e.preventDefault();var t,a=s(this);a.text();a.attr("disabled","disabled"),a.addClass("loading");var r=new FormData;t=a.hasClass("yz-delete-tool")?s(this).parent(".yz-item-tools").data("review-id"):a.closest(".yz-modal").find('input[name="review_id"]').val(),r.append("review_id",t),r.append("action","yz_delete_user_review"),r.append("security",Youzer.security_nonce),s.ajax({type:"POST",data:r,url:Youzer.ajax_url,contentType:!1,processData:!1,success:function(e){a.removeClass("loading"),a.attr("disabled",!1);var t=s.parseJSON(e);return t.error?(s.yz_DialogMsg("error",t.error),a.attr("disabled",!1)):(a.hasClass("yz-delete-tool")?a.closest(".yz-review-item").fadeOut(300,function(){s(this).remove()}):(a.closest("#yz-modal").find(".yz-modal-close-icon").trigger("click"),i.find(".yz-tool-name").text(t.edit_review),i.remove()),s.yz_DialogMsg("success",t.msg)),!1}})})})}(jQuery);
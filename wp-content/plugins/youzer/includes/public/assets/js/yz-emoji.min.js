!function(i){"use strict";i(document).ready(function(){if(jQuery().emojioneArea){if(i(".yz-load-posts-emojis")[0]||i("#yz-edit-activity-form")[0]){i.yz_init_wall_textarea_emojionearea=function(e){return e.emojioneArea({pickerPosition:"bottom",autocomplete:!0,saveEmojisAs:"image",events:{ready:function(){this.editor.textcomplete([{id:"yz_mentions",match:/\B@([\-\d\w]*)$/,search:function(t,e){var n=bp.mentions.users;e(i.map(n,function(e){return 0===e.ID.indexOf(t)||0===e.name.indexOf(t)?e:null}))},template:function(e){return'<img src="'+e.image+'" /><span class="username">@'+e.ID+"</span><small>"+e.name+"</small>"},replace:function(e){return"@"+e.ID+"&nbsp;"},cache:!0,index:1}])}}})};i.yz_init_wall_textarea_emojionearea(i(".yz-wall-textarea"))}if(i(".yz-comments-emojis")[0]){i.yz_init_comments_emoji=function(){return i(".youzer .ac-form textarea").emojioneArea({pickerPosition:"bottom",saveEmojisAs:"image",autocomplete:!0,events:{ready:function(){this.editor.textcomplete([{id:"yz_mentions",match:/\B@([\-\d\w]*)$/,search:function(t,e){var n=bp.mentions.users;e(i.map(n,function(e){return 0===e.ID.indexOf(t)||0===e.name.indexOf(t)?e:null}))},template:function(e){return'<img src="'+e.image+'" /><span class="username">@'+e.ID+"</span><small>"+e.name+"</small>"},replace:function(e){return"@"+e.ID+"&nbsp;"},cache:!0,index:1}])},keypress:function(e,t){13!=t.which||t.shiftKey||(t.preventDefault(),this.trigger("change"),i(e).closest("form").find(".yz-send-comment").click())}}})};i.yz_init_comments_emoji();i("body").on("append",".activity-comments ul",function(e){"li"!=e.target.localName&&"ul"!=e.target.localName||i(this).parent().find(".ac-form textarea").get(0)&&i(this).parent().find(".ac-form textarea").get(0).emojioneArea.setText("")}),i(document).ajaxComplete(function(){i(".yz-load-emojis").remove(),i.yz_init_comments_emoji()})}if(i(".yz-load-messages-emojis")[0]){i("#send-reply textarea,.yzmsg-form-item #message_content").emojioneArea({pickerPosition:"bottom",saveEmojisAs:"image"});var t=this.originalVal=i.fn.val;i.fn.val=function(e){return void 0===e?t.call(this):("message_content"==i(this).attr("id")&&""==e&&i("#send-reply .emojionearea-editor").text(""),t.call(this,e))}}}i("div.activity").on("click","a.acomment-reply",function(e){var t=i(this).closest("li.activity-item"),n=t.attr("id").substr(9,t.attr("id").length);setTimeout(function(){i("#ac-form-"+n).find(".emojionearea-editor").focus()},200)})})}(jQuery);
!function(s){"use strict";s(document).ready(function(){s(".yz-selected-giphy-item");var n=!1,t=null;s(document).on("click",".yz-giphy-item img",function(i){if(!0!==n){n=!0;var t=s(this).attr("data-original"),e=s(this).closest("form"),a=e.find(".yz-selected-giphy-item");e.find(".yz-wall-giphy-form .yz-wall-cf-item").fadeOut(400,function(){e.find(".yz-giphy-loading-preview").fadeIn(),a.find("input").val(t);var i=s("<img>").attr({src:t});a.prepend(i),s(i).on("load",function(i){e.find(".yz-giphy-loading-preview").fadeOut(100,function(){a.fadeIn().css("display","inline-block"),n=!1})})})}}),s(document).on("click",".yz-load-more-giphys",function(i){var t=s(this).closest("form");t.find(".yz-load-more-giphys").addClass("loading");var e=parseInt(s(this).attr("data-page")),a={q:s(this).attr("data-query"),offset:e*Yz_Wall.giphy_limit-2};s.yz_LoadGiphyItems(t,a),s(this).attr("data-page",e+1)}),s(document).on("click",".yz-comment-giphy-form .yz-giphy-item",function(i){var t=s(this).closest("form");t.find("textarea").val('<img src="'+s(this).find("img").attr("src")+'" class="yz-comment-gif" alt="">'),t.find(".yz-send-comment").trigger("click"),t.find("textarea").val(""),s(".yz-comment-giphy-form").fadeOut()}),s(document).on("click",".yz-wall-add-activity_giphy",function(i){var t=s(this).closest("form");if("activity_giphy"==t.find('input:radio[name="post_type"]:checked').val())return!0;t.find(".yz-giphy-item").remove(),s.yz_LoadGiphyItems(t,{url:"https://api.giphy.com/v1/gifs/trending?"})}),s(document).on("click",".yz-wall-add-gif > i",function(i){i.stopImmediatePropagation();var t=s(this).parent().find(".yz-comment-giphy-form");"block"!=t.css("display")?(t.find(".yz-giphy-item").remove(),t.fadeIn().find(".yz-giphy-search-input").focus(),s.yz_LoadGiphyItems(t,{url:"https://api.giphy.com/v1/gifs/trending?"})):t.fadeOut()}),s(document).on("keydown",".yz-giphy-search-input",function(i){if(13!=i.keyCode){var e=s(this);clearTimeout(t),t=setTimeout(function(){var i=e.closest(".yz-wall-giphy-form"),t=e.val();i.find(".yz-load-more-giphys").fadeOut(1).attr({"data-query":t,"data-page":2}),i.find(".yz-giphy-item").remove(),""!=t?s.yz_LoadGiphyItems(i,{q:t}):s.yz_LoadGiphyItems(i,{url:"https://api.giphy.com/v1/gifs/trending?"})},1e3)}else i.preventDefault()}),s(document).on("click",".yz-delete-giphy-item",function(){var i=s(this).closest("form");i.find(".yz-selected-giphy-item").fadeOut(400,function(){s(this).find("img").remove(),s(this).find("input").val(""),i.find(".yz-wall-giphy-form .yz-wall-cf-item").fadeIn()})}),s(document).mouseup(function(i){var t=s(".yz-comment-giphy-form");t.is(i.target)||0!==t.has(i.target).length||t.fadeOut()}),s.yz_LoadGiphyItems=function(e,i){e.find(".yz-no-gifs-found").fadeOut();var a,n=s.extend({url:"https://api.giphy.com/v1/gifs/search?",api_key:"aFFKTuSMjd6j0wwjpFCPXZipQbcnw3vB",limit:Yz_Wall.giphy_limit,fmt:"json",rating:"g"},i),o="";s.ajax({url:n.url+s.param(n),method:"GET",success:function(i){if(0!==i.data.length){for(a=0;a<n.limit;a++){var t=i.data[a].images;o+='<div class="yz-giphy-item"><img src="'+t.fixed_height.url+'" data-original="'+t.original.url+'"></div>'}i.pagination.total_count>n.limit,s(s(o)).insertBefore(e.find(".yz-load-more-giphys")),e.find(".yz-load-more-giphys").removeClass("loading"),e.find(".yz-load-more-giphys").fadeIn().css("display","inline-block"),s(".yz-giphy-items-content").on("scroll",function(i){var t;s(this).parent().hasClass("yz-wall-cf-item")?s(this).scrollLeft()+s(this).innerWidth()>=s(this)[0].scrollWidth&&((t=s(this).find(".yz-load-more-giphys")).hasClass("loading")||t.trigger("click")):s(this).scrollTop()+s(this).innerHeight()>=s(this)[0].scrollHeight&&((t=s(this).find(".yz-load-more-giphys")).hasClass("loading")||t.trigger("click"))})}else n.q&&""!=n.q?e.find(".yz-no-gifs-found").fadeIn():e.find(".yz-load-more-giphys").fadeOut()}})}})}(jQuery);
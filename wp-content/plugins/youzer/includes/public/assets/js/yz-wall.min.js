var yz_load_attachments=!1;!function(n){"use strict";n(document).ready(function(){if(jQuery().viewportChecker){if(n.yz_init_wall_posts_effect=function(){n(".yz_effect")[0]&&n(".yz_effect").viewportChecker({classToAdd:"animated",classToRemove:"invisible",removeClassAfterAnimation:!0,offset:"10%",callbackFunction:function(t,a){t.addClass(t.data("effect"))}},500)},n.yz_init_wall_posts_effect(),n("body").on("append","#activity-stream",function(t){n.yz_init_wall_posts_effect()}),n(".yz-column-content div.activity")[0])new MutationObserver(function(t){n.yz_init_wall_posts_effect()}).observe(n(".yz-column-content div.activity")[0],{attributes:!1,childList:!0,subtree:!1,characterData:!1});if(n("div.activity #activity-stream")[0])new MutationObserver(function(t){n.yz_init_wall_posts_effect()}).observe(n("div.activity #activity-stream")[0],{attributes:!1,childList:!0,subtree:!1,characterData:!1})}if(n(document).on("click",".yz-trigger-who-modal",function(t){t.preventDefault();var a=n(this);if(!a.hasClass("loading")){a.addClass("loading");var e=!1;if(!a.find("i").get(0)){var i=a.text();e=!0;a.html('<i class="fas fa-spin fa-spinner"></i>')}var o=n(this).closest("li.activity-item"),s={action:n(this).data("action"),post_id:o.attr("id").substr(9,o.attr("id").length)};jQuery.post(Youzer.ajax_url,s,function(t){e&&a.html(i),n.yz_show_modal(n(t)),a.removeClass("loading")})}}),n(document).on("click",".yz-delete-post",function(t){var a=n(this),e=a.parents("div.activity ul li"),i=e.prop("class").match(/date-recorded-([0-9]+)/);a.addClass("loading"),jq.post(ajaxurl,{action:"delete_activity",cookie:bp_get_cookies(),id:n(this).parent().attr("data-activity-id"),_wpnonce:a.attr("data-nonce")},function(t){t[0]+t[1]==="-1"?(e.prepend(t.substr(2,t.length)),e.children("#message").hide().fadeIn(300)):(e.slideUp(300),i&&activity_last_recorded===i[1]&&(newest_activities="",activity_last_recorded=0))})}),n(document).on("click",".yz-show-tagged-users",function(t){t.preventDefault(),n(".yz-wall-modal-overlay").fadeIn(500,function(){n(this).find(".yz-modal-loader").fadeIn(400)});var a=n(this).closest("li.activity-item"),e={action:"yz_activity_tagged_users_modal",post_id:a.attr("id").substr(9,a.attr("id").length)};jQuery.post(Youzer.ajax_url,e,function(t){n("#yz-wall-modal").append(t).find(".yz-wall-modal").addClass("yz-wall-modal-show"),n(".yz-wall-modal-overlay").find(".yz-modal-loader").hide()})}),n(document).keyup(function(t){n(".yz-wall-modal-show")[0]&&27===t.keyCode&&n(".yz-wall-modal-close").trigger("click")}),n(document).mouseup(function(t){n(".yz-wall-modal-overlay").is(t.target)&&n(".yz-wall-modal-show")[0]&&n(".yz-wall-modal-close").trigger("click")}),"on"==Youzer.activity_autoloader){var e=n(window);e.scroll(function(){var t=n("#activity-stream .load-more:visible");if(t.get(0)&&!t.data("yz-autoloaded")){var a=t.offset().top-3e3;e.scrollTop()+e.height()>a&&(t.data("yz-autoloaded",1),t.find("a").trigger("click"))}})}n("#activity-stream").on("click",".friendship-button a",function(){n(this).parent().addClass("loading");var t=n(this).attr("id"),a=n(this).attr("href"),i=n(this);return t=(t=t.split("-"))[1],a=(a=(a=a.split("?_wpnonce="))[1].split("&"))[0],jq.post(ajaxurl,{action:"addremove_friend",cookie:bp_get_cookies(),fid:t,_wpnonce:a},function(t){var a=i.attr("rel"),e=i.parent();"add"===a?n(e).fadeOut(200,function(){e.removeClass("add_friend"),e.removeClass("loading"),e.addClass("pending_friend"),e.fadeIn(200).html(t)}):"remove"===a&&n(e).fadeOut(200,function(){e.removeClass("remove_friend"),e.removeClass("loading"),e.addClass("add"),e.fadeIn(200).html(t)})}),!1}),n("#activity-stream").on("click",".group-button a",function(t){n(this).hasClass("membership-requested")||n(this).addClass("yz-btn-loading");var a=n(this).parent().attr("id"),e=n(this).attr("href"),o=n(this);return a=(a=a.split("-"))[1],e=(e=(e=e.split("?_wpnonce="))[1].split("&"))[0],o.hasClass("leave-group")&&!1===confirm(BP_DTheme.leave_group_confirm)||jq.post(ajaxurl,{action:"joinleave_group",cookie:bp_get_cookies(),gid:a,_wpnonce:e},function(e){var i=o.parent();n(i).fadeOut(200,function(){i.fadeIn(200).html(e);var t=n("#groups-personal span"),a=1;o.hasClass("leave-group")?(i.hasClass("hidden")&&i.closest("li").slideUp(200),a=0):o.hasClass("request-membership")&&(a=!1),t.length&&!1!==a&&(a?t.text(1+(t.text()>>0)):t.text((t.text()>>0)-1))})}),!1}),n("audio").on("play",function(){n("audio").not(this).each(function(t,a){a.pause()})}),n(document).on("click",".nice-select .option",function(t){n(this).parent().prev(".current").attr("data-value",n(this).attr("data-value"))}),n("#activity-stream").on("click","li.load-more",function(t){if(n(this).closest(".yz-activity-shortcode")[0]){t.stopImmediatePropagation();var a=n(this);a.addClass("loading");var e=n(this).parents(".yz-activity-shortcode");e.attr("data-page",parseInt(e.attr("data-page"))+1);var i=e.data();return i.page=e.attr("data-page"),n.post(ajaxurl,{data:i,action:"yz_activity_load_activities"},function(t){t.success&&(a.hide(),a.parents("ul.activity-list").append(t.data))},"json"),!1}}),n(document).on("click",".activity-item .yz-show-item-tools",function(t){var a=n(this),e=a.closest("li.activity-item"),i=a.find("i").attr("class");a.hasClass("loaded")?e.find(".yz-activity-tools").fadeToggle():a.hasClass("loading")||(a.addClass("loading"),a.find("i").attr("class","fas fa-spin fa-spinner"),n.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{activity_id:e.attr("id").substr(9,e.attr("id").length),action:"yz_get_activity_tools"},success:function(t){a.find("i").attr("class",i),a.addClass("loaded"),a.removeClass("loading"),t.success&&e.prepend(n(t.data).fadeIn()),n(t.data).find(".yz-pin-tool").get(0)&&n("<script/>",{rel:"text/javascript",src:Youzer.assets+"js/yz-sticky-posts.min.js"}).appendTo("head"),n(t.data).find(".yz-bookmark-tool").get(0)&&n("<script/>",{rel:"text/javascript",src:Youzer.assets+"js/yz-bookmark-posts.min.js"}).appendTo("head")}}))}),n(".yz-activity-show-search-form").on("click",function(t){t.preventDefault();var a=n(this);a.closest("ul").find("#activity-filter-select .yz-dropdown-area").fadeOut(1,function(){a.closest("li").find(".yz-dropdown-area").fadeToggle(),a.closest("li").find("input").focus()})}),n(".yz-activity-show-filter").on("click",function(t){t.preventDefault();var a=n(this);a.closest("ul").find(".yz-activity-show-search .yz-dropdown-area").fadeOut(1,function(){a.closest("li").find(".yz-dropdown-area").fadeToggle()})}),n(".yz-show-activity-search").on("click",function(t){t.preventDefault();var a=n(this).parents("#youzer"),e=a.find(".yz-activity-show-search .yz-dropdown-area");a.find("#activity-filter-select .yz-dropdown-area, .activity-type-tabs").fadeOut(),e.fadeToggle(),e.find("input").focus()}),n(".yz-show-activity-filter").on("click",function(t){t.preventDefault();var a=n(this).parents("#youzer");a.find(".yz-activity-show-search .yz-dropdown-area, .activity-type-tabs").fadeOut(),a.find("#activity-filter-select .yz-dropdown-area").fadeToggle()}),n(".yz-show-activity-menu").on("click",function(t){t.preventDefault();var a=n(this).parents("#youzer");a.find("#subnav .yz-dropdown-area").fadeOut(),a.find(".activity-type-tabs").fadeToggle()}),n(document).on("click",".yz-wall-modal-close",function(t){t.preventDefault(),n(".yz-wall-modal").removeClass("yz-wall-modal-show"),n(".yz-wall-modal-overlay").fadeOut(600),setTimeout(function(){n(".yz-wall-modal").remove()},500)})})}(jQuery);
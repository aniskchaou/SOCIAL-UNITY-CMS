!function(o){"use strict";o(document).ready(function(){o(document).on("click","#yz-add-custom-widget",function(t){t.preventDefault();var e=o(".yz-custom-widget-name span"),i=o("#yz-custom-widgets-form"),d="yz_custom_widgets[yz_custom_widget_"+yz_nextCustomWidget+"]",n=o.yz_getAddData(i,"yz_widget"),a={value:n.name,form:i,selector:e,type:"text"};if(!o.validate_widgets_data(a))return!1;o("#yz_custom_widgets").prepend('<li class="yz-custom-widget-item" data-widget-name="yz_custom_widget_'+yz_nextCustomWidget+'"><h2 class="yz-custom-widget-name"><i class="yz-custom-widget-icon '+n.icon+'"></i><span>'+n.name+'</span></h2><input type="hidden" name="'+d+'[icon]" value="'+n.icon+'" ><input type="hidden" name="'+d+'[name]" value="'+n.name+'" ><input type="hidden" name="'+d+'[content]" value="'+encodeURIComponent(n.content)+'" ><input type="hidden" name="'+d+'[display_title]" value="'+n.display_title+'" ><input type="hidden" name="'+d+'[display_padding]" value="'+n.display_padding+'" ><a class="yz-edit-item yz-edit-custom-widget"></a><a class="yz-delete-item yz-delete-custom-widget"></a></li>'),o.yz_HideModal(i),yz_nextCustomWidget++}),o(document).on("click",".yz-edit-custom-widget",function(t){var e=o(this).closest(".yz-custom-widget-item"),i=o("#yz-custom-widgets-form");o.yz_EditForm({button_id:"yz-update-custom-widget",form_title:Yz_Custom_Widgets.update_widget,form:i,item:e})}),o(document).on("click","#yz-update-custom-widget",function(t){t.preventDefault();var e=".yz-custom-widget-name span",i=o("#yz-custom-widgets-form"),d=o.yz_getItemObject(i),n=o.yz_getNewData(i,"keyToVal"),a={old_title:d.find(e).text(),value:n.name,form:i,selector:o(e),type:"text"};if(!o.validate_widgets_data(a))return!1;o.yz_updateFieldsData(i)}),o.validate_widgets_data=function(t){var e=o.extend({},t);return!o.isDataEmpty(e.form)&&(!o.yz_isAlreadyExist({old_title:e.old_title,selector:e.selector,value:e.value,type:"text"})||(o.ShowPanelMessage({msg:Yz_Functions.name_exist,type:"error"}),!1))},o(document).on("click",".yz-delete-custom-widget",function(){o(this).closest("li").remove(),o(".yz-custom-widget-item")[0]||o("#yz_custom_widgets").append('<p class="yz-no-content yz-no-custom-widgets">'+Yz_Custom_Widgets.no_custom_widgets+"</p>")})})}(jQuery);
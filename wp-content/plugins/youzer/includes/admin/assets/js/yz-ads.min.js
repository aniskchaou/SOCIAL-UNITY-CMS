!function(o){"use strict";o(document).ready(function(){o(document).on("click","#yz-add-ad",function(e){e.preventDefault();var t=o("#yz-ads-form"),a=o.yz_getAddData(t,"yz_ad"),d={selector:o(".yz-ad-title"),AD_banner:a.banner,AD_title:a.title,AD_type:a.type,AD_code:a.code,AD_url:a.url};if(!o.validate_ad_data(d))return!1;var n="yz_ads[yz_ad_"+yz_nextAD+"]",i="adsense"==a.type?"yz_show_icon":"yz_hide_icon",l="banner"==a.type?"style='background-image: url( "+a.banner+" );'":"";o("#yz_ads").prepend('<li class="yz-ad-item" data-ad-name="yz_ad_'+yz_nextAD+'"><div class="yz-ad-img '+i+'" '+l+'><i class="fas fa-code"></i></div><div class="yz-ad-data"><h2 class="yz-ad-title">'+a.title+'</h2><div class="yz-ad-actions"><a class="yz-edit-item yz-edit-ad"></a><a class="yz-delete-item yz-delete-ad"></a></div></div><input type="hidden" name="'+n+'[title]" value="'+a.title+'"><input type="hidden" name="'+n+'[is_sponsored]" value="'+a.is_sponsored+'"><input type="hidden" name="'+n+'[url]" value="'+a.url+'"><input type="hidden" name="'+n+'[type]" value="'+a.type+'"><input type="hidden" name="'+n+'[code]" value="'+encodeURIComponent(a.code)+'"><input type="hidden" name="'+n+'[banner]" value="'+a.banner+'"></li>'),o.yz_HideModal(t),yz_nextAD++}),o(document).on("click",".yz-edit-ad",function(){var e=o(this).closest(".yz-ad-item");o.yz_EditForm({item:e,form_title:Yz_Ads.update_ad,button_id:"yz-update-ad",form:o("#yz-ads-form")}),o.enable_live_preview()}),o(document).on("click","#yz-update-ad",function(e){e.preventDefault();var t=o("#yz-ads-form"),a=o.yz_getItemObject(t),d=o.yz_getNewData(t,"keyToVal"),n={old_title:a.find(".yz-ad-title").text(),selector:o(".yz-ad-title"),AD_banner:d.banner,AD_title:d.title,AD_code:d.code,AD_type:d.type,AD_url:d.url};if(!o.validate_ad_data(n))return!1;o.yz_updateFieldsData(t)}),o(document).on("change","input[name=yz_ad_type]",function(){var e=".yz-adcode-item",t=".yz-adbanner-items",a=o(this).closest(".yz-ads-form");"adsense"==this.value?a.find(t).fadeToggle(400,function(){a.find(e).fadeToggle(400)}):a.find(e).fadeToggle(400,function(){a.find(t).fadeToggle(400)})}),o.validate_ad_data=function(e){var t=o.extend({},e),a=o.yz_isAlreadyExist({selector:t.selector,value:t.AD_title,old_title:t.old_title,type:"text"});if(!t.AD_title||a)return o.ShowPanelMessage({msg:Yz_Ads.empty_ad,type:"error"}),!1;if("banner"==t.AD_type){if(!function(e){if(!e)return o.ShowPanelMessage({msg:Yz_Ads.empty_banner,type:"error"}),!1;if(!o.yz_isImgExist(e,"banner"))return!1;return!0}(t.AD_banner))return!1}else if("adsense"==t.AD_type&&(null==t.AD_code||""==o.trim(t.AD_code)))return o.ShowPanelMessage({msg:Yz_Ads.code_empty,type:"error"}),!1;return!0},o(document).on("click",".yz-delete-ad",function(){o(this).closest("li").remove(),o(".yz-ad-item")[0]||o("#yz_ads").append('<p class="yz-no-content yz-no-ads">'+Yz_Ads.no_ads+"</p>")})})}(jQuery);
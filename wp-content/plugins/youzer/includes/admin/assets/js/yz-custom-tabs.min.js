!function(i){"use strict";i(document).ready(function(){i(document).on("click","#yz-add-custom-tab",function(t){t.preventDefault();var e=i(".yz-custom-tab-name span"),a=i(this).closest("form").find("#yz-custom-tabs-form"),n="yz_custom_tabs[yz_custom_tab_"+yz_nextTab+"]",s=i.yz_getAddData(a,"yz_tab"),o={slug:s.slug,value:s.title,form:a,selector:e,type:"text",tab_link:s.link,tab_type:s.type,tab_title:s.title,tab_content:s.content};if(!i.validate_tabs_data(o))return!1;i("#yz_custom_tabs").prepend('<li class="yz-custom-tab-item" data-tab-name="yz_custom_tab_'+yz_nextTab+'"><h2 class="yz-custom-tab-name"><i class="yz-custom-tab-icon '+s.icon+'"></i><span>'+s.title+'</span></h2><input type="hidden" name="'+n+'[slug]" value="'+s.slug+'" ><input type="hidden" name="'+n+'[link]" value="'+s.link+'" ><input type="hidden" name="'+n+'[type]" value="'+s.type+'" ><input type="hidden" name="'+n+'[title]" value="'+s.title+'" ><input type="hidden" name="'+n+'[content]" value="'+encodeURIComponent(s.content)+'" ><input type="hidden" name="'+n+'[display_sidebar]" value="'+s.display_sidebar+'" ><input type="hidden" name="'+n+'[display_nonloggedin]" value="'+s.display_nonloggedin+'" ><a class="yz-edit-item yz-edit-custom-tab"></a><a class="yz-delete-item yz-delete-custom-tab"></a></li>'),i.yz_HideModal(a),yz_nextTab++}),i(document).on("click",".yz-edit-custom-tab",function(t){var e=i(this).closest(".yz-custom-tab-item"),a=i("#yz-custom-tabs-form");i.yz_EditForm({button_id:"yz-update-custom-tab",form_title:Yz_Custom_Tabs.update_tab,form:a,item:e})}),i(document).on("click","#yz-update-custom-tab",function(t){t.preventDefault();var e=".yz-custom-tab-name span",a=i("#yz-custom-tabs-form"),n=i.yz_getItemObject(a),s=i.yz_getNewData(a,"keyToVal"),o={old_title:n.find(e).text(),slug:s.slug,value:s.title,form:a,selector:i(e),type:"text",tab_link:s.link,tab_type:s.type,tab_title:s.title,tab_content:s.content};if(!i.validate_tabs_data(o))return!1;i.yz_updateFieldsData(a)}),i.validate_tabs_data=function(t){var e=i.extend({},t);if(null==e.tab_title||""==i.trim(e.tab_title))return i.ShowPanelMessage({msg:Yz_Custom_Tabs.tab_title_empty,type:"error"}),!1;if(i.yz_isAlreadyExist({old_title:e.old_title,selector:e.selector,value:e.value,type:"text"}))return i.ShowPanelMessage({msg:Yz_Functions.name_exist,type:"error"}),!1;if("link"==e.tab_type){if(null==e.tab_link||""==i.trim(e.tab_link))return i.ShowPanelMessage({msg:Yz_Custom_Tabs.tab_url_empty,type:"error"}),!1}else if("shortcode"==e.tab_type&&(null==e.tab_content||""==i.trim(e.tab_content)))return i.ShowPanelMessage({msg:Yz_Custom_Tabs.tab_code_empty,type:"error"}),!1;return!0},i(document).on("click",".yz-delete-custom-tab",function(){i(this).closest("li").remove(),i(".yz-custom-tab-item")[0]||i("#yz_custom_tabs").append('<p class="yz-no-content yz-no-custom-tabs">'+Yz_Custom_Tabs.no_custom_tabs+"</p>")}),i(document).on("change","input[name=yz_tab_type]",function(){var t=".yz-custom-tabs-shortcode-items",e=".yz-custom-tabs-link-item",a=i(this).closest(".yz-custom-tabs-form");"shortcode"==this.value?a.find(e).fadeToggle(400,function(){a.find(t).fadeToggle(400)}):a.find(t).fadeToggle(400,function(){a.find(e).fadeToggle(400)})})})}(jQuery);